version: 2

macros:
  - name: anonymize_column
    description: >
        Macro pemettant d'anonymiser une colonne d'un modele
        Dans le cadre de la gestion du RGPD, il est necessaire de traiter d'une maniére particulieres les données sensibles (PII,PHI etc ...) 
        Dans le cadre de ce projet, cette macro est volontairement simplifiée 
        Dans un contexte réél, l'ensemble des metadonnées du modele pourraient etre parcourues pour recuperer les données taguées comme sensible
        Un systeme de tag coté bigquery et de masking policy pourrait etre mis en place en fonction des roles bigquery (ici l'information dans le yml est juste declarative )
        Ainsi le masquage serait réalisé selon le profil de connexion
    arguments:
      - name: col
        type: string
        description: Nom de la colonne à anonymiser
      - name: method
        type: string
        description: Méthode de hash à utiliser (default -> sha)