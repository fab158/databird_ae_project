version: 2

models:
  - name: int_order_items_event_enriched
    description:  '{{ doc("int_order_items_event_enriched") }}'
    columns:  
      - name: shipment_status
        tests:
          - not_null
          - accepted_values:
              arguments: 
                values: ['SHIPPED', 'NOT_SHIPPED']

      - name: shipment_type
        tests:
          - accepted_values:
              arguments: 
                values: ['ON_TIME_ORDER', 'LATE_ORDER', "{{ var('default_string_not_applicable') }}" ]
      
      - name: order_item_total
        tests:
          - not_null
      
    tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns:
              - order_id
              - item_id  